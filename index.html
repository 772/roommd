<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>RoomMD</title>
        <style>
            body {
            background-color: #2b2c2f;
            }
            * {
            margin: 0;
            padding: 0;
            }
            button {
            background-color: #04AA6D;
            border: none;
            color: white;
            height: 4vh;
            padding: 0px 2vh;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 2vh;
            cursor: pointer;
            border-radius: 0.5vh;
            margin: 1vh 0 1vh 2%;
            }
            button:hover {
            color: #eee;
            }
            textarea {
            padding: 1em;
            line-height: 1;
            background-color: rgb(0 27 51 / 0.9);
            width:96%;
            height:88vh;
            outline: none;
            font-size: 15px;
            position: absolute;
            left: 2%;
            top: 7vh;
            white-space: nowrap;
            color:white;
            font-family: "Courier New";
            }
            canvas {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            margin-top:8vh;background-color:white;height:90vh;width:100%;
            }
        </style>
    </head>
    <body>
        <button onclick="window.location.reload()"><b>RUN &#9654;</b></button>
        <button onclick="toggle_textarea()"><b>Toggle code</b></button>
        <button onclick="document.location='https://github.com/772/roommd'"><b>Git</b></button></div>
        <canvas id="mygame-canvas"></canvas>
        <textarea id="input"></textarea>
        <script type="module">
            const inputElement = document.getElementById("input");
            if (inputElement.value.trim() === "") {
                fetch("example.md")
                    .then((response) => {
                        if (!response.ok) {
                            throw new Error("File not found or network error");
                        }
                        return response.text();
                    })
                    .then((text) => {
                        inputElement.value = text;
                    })
                    .catch((error) => {
                        console.error("Error:", error);
                        inputElement.value = `Failed to load file: ${error.message}`;
                    });
            }
            import init from "./wasm.js";
            init().catch((error) => {
                if (
                    !error.message.startsWith(
                        "Using exceptions for control flow, don't mind me. This isn't actually an error!",
                    )
                ) {
                    throw error;
                }
            });
        </script>
        <script>
            function toggle_textarea() {
            	const input = document.getElementById("input");
            	if (input.style.display === "none") {
            		input.style.display = "block";
            	} else {
            		input.style.display = "none";
            	}
            }
        </script>
    </body>
</html>
